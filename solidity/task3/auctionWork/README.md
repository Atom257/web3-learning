# NFT æ‹å–å¸‚åœº

ä¸€ä¸ªåŸºäº Hardhat æ¡†æ¶å¼€å‘çš„å»ä¸­å¿ƒåŒ– NFT æ‹å–å¸‚åœºï¼Œæ”¯æŒ ERC721 NFT æ‹å–ã€Chainlink ä»·æ ¼é¢„è¨€æœºé›†æˆã€åˆçº¦å‡çº§å’ŒåŠ¨æ€æ‰‹ç»­è´¹åŠŸèƒ½ã€‚

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [ç¯å¢ƒè¦æ±‚](#ç¯å¢ƒè¦æ±‚)
- [å®‰è£…ä¸é…ç½®](#å®‰è£…ä¸é…ç½®)
- [éƒ¨ç½²æ­¥éª¤](#éƒ¨ç½²æ­¥éª¤)
- [ä½¿ç”¨è¯´æ˜](#ä½¿ç”¨è¯´æ˜)
- [æµ‹è¯•](#æµ‹è¯•)
- [åˆçº¦åœ°å€](#åˆçº¦åœ°å€)
- [æ–‡æ¡£](#æ–‡æ¡£)

## ğŸ¯ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ NFT æ‹å–å¸‚åœºï¼Œæ”¯æŒä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

- **NFT æ‹å–**ï¼šæ”¯æŒ ERC721 æ ‡å‡† NFT çš„æ‹å–äº¤æ˜“
- **å¤šå¸ç§æ”¯ä»˜**ï¼šæ”¯æŒä»¥å¤ªåŠï¼ˆETHï¼‰å’Œ ERC20 ä»£å¸å‡ºä»·
- **ä»·æ ¼é¢„è¨€æœº**ï¼šé›†æˆ Chainlink é¢„è¨€æœºï¼Œå®æ—¶è·å–ä»£å¸ä»·æ ¼å¹¶è½¬æ¢ä¸ºç¾å…ƒä»·å€¼
- **åˆçº¦å‡çº§**ï¼šä½¿ç”¨é€æ˜ä»£ç†æ¨¡å¼å®ç°åˆçº¦å¯å‡çº§
- **åŠ¨æ€æ‰‹ç»­è´¹**ï¼šæ ¹æ®æ‹å–é‡‘é¢è‡ªåŠ¨è°ƒæ•´æ‰‹ç»­è´¹ç‡ï¼ˆé¢å¤–æŒ‘æˆ˜åŠŸèƒ½ï¼‰

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

1. **NFT åˆçº¦ï¼ˆMyNFTï¼‰**
   - ç¬¦åˆ ERC721 æ ‡å‡†
   - æ”¯æŒ NFT é“¸é€ å’Œè½¬ç§»
   - æ”¯æŒæ‰¹é‡é“¸é€ 
   - å¯é…ç½®å…ƒæ•°æ® URI

2. **æ‹å–åˆçº¦ï¼ˆAuctionV1/V2ï¼‰**
   - **åˆ›å»ºæ‹å–**ï¼šæ”¯æŒè™šæ‹Ÿç‰©å“å’ŒçœŸå® NFT æ‹å–
   - **å‡ºä»·åŠŸèƒ½**ï¼šæ”¯æŒ ETH å’Œ ERC20 ä»£å¸å‡ºä»·
   - **è‡ªåŠ¨é€€æ¬¾**ï¼šæ–°å‡ºä»·è‡ªåŠ¨é€€è¿˜ä¸Šä¸€ä¸ªå‡ºä»·è€…çš„èµ„é‡‘
   - **æ‹å–ç»“ç®—**ï¼šæ‹å–ç»“æŸåè‡ªåŠ¨åˆ†é…èµ„é‡‘å’Œ NFT
   - **ä»·æ ¼æ¯”è¾ƒ**ï¼šæ‰€æœ‰å‡ºä»·è½¬æ¢ä¸º USD è¿›è¡Œç»Ÿä¸€æ¯”è¾ƒ

3. **ä»·æ ¼é¢„è¨€æœºï¼ˆPriceOracleï¼‰**
   - é›†æˆ Chainlink AggregatorV3Interface
   - æ”¯æŒ ETH å’Œ ERC20 ä»£å¸ä»·æ ¼æŸ¥è¯¢
   - è‡ªåŠ¨å°†ä»£å¸æ•°é‡è½¬æ¢ä¸º USD ä»·å€¼ï¼ˆ8 decimals ç²¾åº¦ï¼‰

4. **åˆçº¦å‡çº§**
   - ä½¿ç”¨ OpenZeppelin é€æ˜ä»£ç†æ¨¡å¼
   - V1ï¼šæ”¯æŒè™šæ‹Ÿç‰©å“æ‹å–
   - V2ï¼šæ–°å¢çœŸå® NFT æ‹å–åŠŸèƒ½
   - å‡çº§æ—¶ä¿æŒæ•°æ®å®Œæ•´æ€§

5. **åŠ¨æ€æ‰‹ç»­è´¹ï¼ˆé¢å¤–æŒ‘æˆ˜ï¼‰**
   - é˜¶æ¢¯å¼è´¹ç‡ï¼šæ ¹æ®æ‹å–é‡‘é¢ï¼ˆUSDï¼‰è‡ªåŠ¨é€‰æ‹©è´¹ç‡
   - å¯é…ç½®è´¹ç‡é˜¶æ¢¯
   - æ”¯æŒå›ºå®šè´¹ç‡å’ŒåŠ¨æ€è´¹ç‡åˆ‡æ¢

### å®‰å…¨ç‰¹æ€§

- é‡å…¥æ”»å‡»é˜²æŠ¤ï¼ˆReentrancyGuardï¼‰
- æƒé™ç®¡ç†ï¼ˆOwnableï¼‰
- è¾“å…¥éªŒè¯å’Œè¾¹ç•Œæ£€æŸ¥
- å­˜å‚¨å¸ƒå±€åˆ†ç¦»ï¼ˆå‡çº§å®‰å…¨ï¼‰

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ

- **å¼€å‘æ¡†æ¶**ï¼šHardhat 2.27.1
- **Solidity ç‰ˆæœ¬**ï¼š0.8.23
- **åˆçº¦åº“**ï¼š
  - OpenZeppelin Contracts 5.4.0
  - OpenZeppelin Contracts Upgradeable 5.4.0
  - Chainlink Contracts 1.4.0
- **å‡çº§æ’ä»¶**ï¼š@openzeppelin/hardhat-upgrades 3.9.1

### åˆçº¦æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         PriceOracle                 â”‚
â”‚  (Chainlink ä»·æ ¼é¢„è¨€æœºé›†æˆ)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         AuctionV1                   â”‚
â”‚  (è™šæ‹Ÿç‰©å“æ‹å– + åŸºç¡€åŠŸèƒ½)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         AuctionV2                   â”‚
â”‚  (ç»§æ‰¿ V1 + NFT æ‹å–åŠŸèƒ½)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MyNFT                       â”‚
â”‚  (ERC721 NFT åˆçº¦)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»£ç†æ¨¡å¼

- **ä»£ç†ç±»å‹**ï¼šé€æ˜ä»£ç†ï¼ˆTransparent Proxyï¼‰
- **å®ç°åˆçº¦**ï¼šAuctionV1 â†’ AuctionV2ï¼ˆå¯å‡çº§ï¼‰
- **å­˜å‚¨å¸ƒå±€**ï¼šä½¿ç”¨ AuctionStorage åˆ†ç¦»å­˜å‚¨ï¼Œç¡®ä¿å‡çº§å®‰å…¨

## ğŸ“ é¡¹ç›®ç»“æ„

```
auctionWork/
â”œâ”€â”€ contracts/                 # æ™ºèƒ½åˆçº¦
â”‚   â”œâ”€â”€ auction/              # æ‹å–åˆçº¦
â”‚   â”‚   â”œâ”€â”€ AuctionV1.sol    # V1 ç‰ˆæœ¬ï¼ˆè™šæ‹Ÿç‰©å“æ‹å–ï¼‰
â”‚   â”‚   â”œâ”€â”€ AuctionV2.sol    # V2 ç‰ˆæœ¬ï¼ˆNFT æ‹å–ï¼‰
â”‚   â”‚   â””â”€â”€ AuctionStorage.sol # å­˜å‚¨å¸ƒå±€
â”‚   â”œâ”€â”€ nft/                  # NFT åˆçº¦
â”‚   â”‚   â””â”€â”€ MyNFT.sol        # ERC721 NFT åˆçº¦
â”‚   â”œâ”€â”€ oracle/               # ä»·æ ¼é¢„è¨€æœº
â”‚   â”‚   â””â”€â”€ PriceOracle.sol  # Chainlink ä»·æ ¼é¢„è¨€æœº
â”‚   â”œâ”€â”€ interfaces/           # æ¥å£å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ IAuction.sol
â”‚   â”‚   â””â”€â”€ IPriceOracle.sol
â”‚   â””â”€â”€ mocks/                # æµ‹è¯•ç”¨ Mock åˆçº¦
â”‚       â”œâ”€â”€ MockERC20.sol
â”‚       â”œâ”€â”€ MockERC721.sol
â”‚       â””â”€â”€ MockPriceFeed.sol
â”œâ”€â”€ scripts/                   # éƒ¨ç½²å’Œæ“ä½œè„šæœ¬
â”‚   â”œâ”€â”€ deploy/               # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ auction/              # æ‹å–æ“ä½œè„šæœ¬
â”‚   â”œâ”€â”€ query/                # æŸ¥è¯¢è„šæœ¬
â”‚   â””â”€â”€ admin/                # ç®¡ç†è„šæœ¬
â”œâ”€â”€ test/                      # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ auction_v1.test.js   # V1 åŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ auction_v2_upgrade.test.js # V2 å‡çº§æµ‹è¯•
â”‚   â””â”€â”€ oracle.test.js        # é¢„è¨€æœºæµ‹è¯•
â”œâ”€â”€ hardhat.config.js         # Hardhat é…ç½®
â”œâ”€â”€ package.json              # é¡¹ç›®ä¾èµ–
â””â”€â”€ README.md                 # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”§ ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- npm æˆ– yarn
- Git

## ğŸ“¦ å®‰è£…ä¸é…ç½®

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd auctionWork
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# ç½‘ç»œé…ç½®
SEPOLIA_RPC=https://sepolia.infura.io/v3/YOUR_INFURA_KEY
HARDHAT_NETWORK=sepolia

# è´¦æˆ·ç§é’¥ï¼ˆç”¨äºéƒ¨ç½²å’Œæµ‹è¯•ï¼‰
PRIVATE_KEY=your_private_key_here

# æ‰‹ç»­è´¹é…ç½®
FEE_BPS=200  # å›ºå®šæ‰‹ç»­è´¹ï¼ˆbasis pointsï¼Œ200 = 2%ï¼‰
FEE_RECIPIENT=0x...  # æ‰‹ç»­è´¹æ¥æ”¶åœ°å€

# Etherscan APIï¼ˆç”¨äºéªŒè¯åˆçº¦ï¼‰
ETHERSCAN_KEY=your_etherscan_api_key

# å¯é€‰ï¼šMock ä»·æ ¼æºé…ç½®
DEPLOY_MOCK_FEED=true
ETH_PRICE_USD=2000  # ETH ä»·æ ¼ï¼ˆUSDï¼‰
```

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. ç¼–è¯‘åˆçº¦

```bash
npx hardhat compile
```

### 2. éƒ¨ç½²åˆ°æœ¬åœ°ç½‘ç»œï¼ˆæµ‹è¯•ï¼‰

```bash
# å¯åŠ¨æœ¬åœ°èŠ‚ç‚¹
npx hardhat node

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯éƒ¨ç½²åˆçº¦
npx hardhat run scripts/deploy/deploy_price_oracle.js --network localhost
npx hardhat run scripts/deploy/deploy_auction_v1.js --network localhost
```

### 3. éƒ¨ç½²åˆ° Sepolia æµ‹è¯•ç½‘

```bash
# 1. éƒ¨ç½²ä»·æ ¼é¢„è¨€æœº
npx hardhat run scripts/deploy/deploy_price_oracle.js --network sepolia

# 2. è®¾ç½®ä»·æ ¼æºï¼ˆä½¿ç”¨ Chainlink å®˜æ–¹ä»·æ ¼æºï¼‰
# è·å– Sepolia æµ‹è¯•ç½‘çš„ Chainlink ä»·æ ¼æºåœ°å€ï¼š
# ETH/USD: 0x694AA1769357215DE4FAC081bf1f309aDC325306
npx hardhat run scripts/admin/set_price_feed.js --network sepolia

# 3. éƒ¨ç½²æ‹å–åˆçº¦
npx hardhat run scripts/deploy/deploy_auction_v1.js --network sepolia

# 4. ï¼ˆå¯é€‰ï¼‰å‡çº§åˆ° V2
npx hardhat run scripts/deploy/upgrade_auction_to_v2.js --network sepolia
```

### 4. é…ç½®åŠ¨æ€æ‰‹ç»­è´¹ï¼ˆå¯é€‰ï¼‰

```bash
# è®¾ç½®è´¹ç‡é˜¶æ¢¯
# æ ¼å¼ï¼š'minAmountUsd1:feeBps1,minAmountUsd2:feeBps2,...'
# ç¤ºä¾‹ï¼š$0-$1k:5%, $1k-$10k:3%, $10k-$100k:2%, $100k+:1%
npx hardhat run scripts/admin/set_fee_tiers.js --network sepolia -- \
  '0:500,100000000000:300,1000000000000:200,10000000000000:100'
```

éƒ¨ç½²å®Œæˆåï¼Œåˆçº¦åœ°å€ä¼šä¿å­˜åœ¨ `deployment.json` æ–‡ä»¶ä¸­ã€‚

## ğŸ“– ä½¿ç”¨è¯´æ˜

### åˆ›å»º NFT æ‹å–

```bash
# 1. éƒ¨ç½² NFT åˆçº¦ï¼ˆå¦‚æœéœ€è¦ï¼‰
# 2. é“¸é€  NFT
# 3. æˆæƒæ‹å–åˆçº¦
# 4. åˆ›å»ºæ‹å–
npx hardhat run scripts/auction/create_nft_auction.js --network sepolia -- \
  <NFT_CONTRACT_ADDRESS> <TOKEN_ID>
```

### å‚ä¸æ‹å–

```bash
# å‡ºä»·
npx hardhat run scripts/auction/place_bid.js --network sepolia

# ç»“ç®—æ‹å–
npx hardhat run scripts/auction/settle_auction.js --network sepolia
```

### æŸ¥è¯¢ä¿¡æ¯

```bash
# æŸ¥çœ‹æ‹å–ä¿¡æ¯
npx hardhat run scripts/query/get_auction_info.js --network sepolia

# åˆ—å‡ºæ‰€æœ‰æ‹å–
npx hardhat run scripts/query/list_auctions.js --network sepolia

# æ£€æŸ¥åˆçº¦çŠ¶æ€
npx hardhat run scripts/query/check_contract_status.js --network sepolia
```

### ç®¡ç†æ“ä½œ

```bash
# è®¾ç½®å›ºå®šæ‰‹ç»­è´¹
npx hardhat run scripts/admin/set_fee.js --network sepolia -- 300

# è®¾ç½®åŠ¨æ€æ‰‹ç»­è´¹é˜¶æ¢¯
npx hardhat run scripts/admin/set_fee_tiers.js --network sepolia -- \
  '0:500,100000000000:300,1000000000000:200,10000000000000:100'

# è®¾ç½®æ‰‹ç»­è´¹æ¥æ”¶åœ°å€
npx hardhat run scripts/admin/set_fee_recipient.js --network sepolia -- 0x...

# è®¾ç½®ä»·æ ¼æº
npx hardhat run scripts/admin/set_price_feed.js --network sepolia
```

è¯¦ç»†è„šæœ¬ä½¿ç”¨è¯´æ˜è¯·å‚è€ƒ [scripts/README.md](./scripts/README.md)ã€‚

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
npm test
# æˆ–
npx hardhat test
```

### è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶

```bash
# æµ‹è¯•æ‹å–åˆçº¦ V1
npx hardhat test test/auction_v1.test.js

# æµ‹è¯•åˆçº¦å‡çº§å’Œ NFT æ‹å–
npx hardhat test test/auction_v2_upgrade.test.js

# æµ‹è¯•ä»·æ ¼é¢„è¨€æœº
npx hardhat test test/oracle.test.js
```

### æµ‹è¯•è¦†ç›–ç‡

```bash
npm run test:coverage
```

### æµ‹è¯•ç»“æœ

é¡¹ç›®åŒ…å« 42 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–ä»¥ä¸‹åŠŸèƒ½ï¼š

- âœ… ä»·æ ¼é¢„è¨€æœºåŠŸèƒ½ï¼ˆåˆå§‹åŒ–ã€ä»·æ ¼æŸ¥è¯¢ã€ä»·æ ¼æ›´æ–°ï¼‰
- âœ… æ‹å–åˆçº¦ V1 åŠŸèƒ½ï¼ˆåˆ›å»ºã€å‡ºä»·ã€ç»“ç®—ã€æŸ¥è¯¢ï¼‰
- âœ… åˆçº¦å‡çº§ï¼ˆV1 â†’ V2ï¼‰
- âœ… NFT æ‹å–åŠŸèƒ½
- âœ… åŠ¨æ€æ‰‹ç»­è´¹åŠŸèƒ½
- âœ… è¾¹ç•Œæ¡ä»¶å’Œé”™è¯¯å¤„ç†

## ğŸ“ åˆçº¦åœ°å€

### Sepolia æµ‹è¯•ç½‘ï¼ˆå·²éƒ¨ç½²ï¼‰

åˆçº¦åœ°å€å·²ä¿å­˜åœ¨ `deployment.json` æ–‡ä»¶ä¸­ï¼š

```json
{
  "network": "sepolia",
  "PriceOracle": "0x4CD64219dDC61820D859A38d2E95Aa0156f62491",
  "AuctionV1Proxy": "0xC8228c7A9165a22459022a3B0e1B11C41DF15560",
  "ProxyAdmin": "0xbB21B11E973c6AE2c13bc3B788B71b59B6d50035",
  "ChainlinkETHUSDPriceFeed": "0x694AA1769357215DE4FAC081bf1f309aDC325306"
}
```

#### Etherscan é“¾æ¥

- **AuctionV1Proxy** (ç”¨æˆ·äº¤äº’åœ°å€): [0xC8228c7A9165a22459022a3B0e1B11C41DF15560](https://sepolia.etherscan.io/address/0xC8228c7A9165a22459022a3B0e1B11C41DF15560)
- **PriceOracle**: [0x4CD64219dDC61820D859A38d2E95Aa0156f62491](https://sepolia.etherscan.io/address/0x4CD64219dDC61820D859A38d2E95Aa0156f62491)
- **ProxyAdmin**: [0xbB21B11E973c6AE2c13bc3B788B71b59B6d50035](https://sepolia.etherscan.io/address/0xbB21B11E973c6AE2c13bc3B788B71b59B6d50035)

**æ³¨æ„**: ç”¨æˆ·åº”è¯¥ä¸ **AuctionV1Proxy** åœ°å€äº¤äº’ï¼Œè¿™æ˜¯ä»£ç†åˆçº¦åœ°å€ã€‚

## ğŸ“š æ–‡æ¡£

- [éƒ¨ç½²åœ°å€è¯´æ˜](./DEPLOYMENT.md) - å®Œæ•´çš„éƒ¨ç½²ä¿¡æ¯å’Œåˆçº¦åœ°å€
- [æµ‹è¯•æŠ¥å‘Š](./TEST_REPORT.md) - è¯¦ç»†çš„æµ‹è¯•ç»“æœå’Œè¦†ç›–ç‡
- [æäº¤æ£€æŸ¥æ¸…å•](./SUBMISSION_CHECKLIST.md) - æäº¤å†…å®¹å®Œæˆæƒ…å†µ
- [åˆçº¦æ¥å£æ–‡æ¡£](./contracts/interfaces/) - åˆçº¦æ¥å£å®šä¹‰

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

1. **ç§é’¥å®‰å…¨**ï¼šæ°¸è¿œä¸è¦å°†ç§é’¥æäº¤åˆ°ä»£ç ä»“åº“
2. **æµ‹è¯•ç½‘éƒ¨ç½²**ï¼šå»ºè®®å…ˆåœ¨æµ‹è¯•ç½‘å……åˆ†æµ‹è¯•åå†éƒ¨ç½²åˆ°ä¸»ç½‘
3. **åˆçº¦å‡çº§**ï¼šå‡çº§å‰åŠ¡å¿…éªŒè¯æ–°åˆçº¦çš„æ­£ç¡®æ€§
4. **ä»·æ ¼æºéªŒè¯**ï¼šç¡®ä¿ä½¿ç”¨ Chainlink å®˜æ–¹ä»·æ ¼æºåœ°å€
5. **æƒé™ç®¡ç†**ï¼šå¦¥å–„ä¿ç®¡åˆçº¦ owner ç§é’¥

## ğŸ“ åŠŸèƒ½è¯´æ˜

### åŠ¨æ€æ‰‹ç»­è´¹

é¡¹ç›®å®ç°äº†é˜¶æ¢¯å¼åŠ¨æ€æ‰‹ç»­è´¹åŠŸèƒ½ï¼š

- **è´¹ç‡é˜¶æ¢¯**ï¼šæ ¹æ®æ‹å–é‡‘é¢ï¼ˆUSDï¼‰è‡ªåŠ¨é€‰æ‹©è´¹ç‡
- **ç¤ºä¾‹é…ç½®**ï¼š
  - $0 - $1,000ï¼š5%
  - $1,000 - $10,000ï¼š3%
  - $10,000 - $100,000ï¼š2%
  - $100,000+ï¼š1%

- **ä½¿ç”¨æ–¹å¼**ï¼š
  ```bash
  # è®¾ç½®è´¹ç‡é˜¶æ¢¯
  npx hardhat run scripts/admin/set_fee_tiers.js --network sepolia -- \
    '0:500,100000000000:300,1000000000000:200,10000000000000:100'
  
  # ç¦ç”¨åŠ¨æ€æ‰‹ç»­è´¹ï¼Œä½¿ç”¨å›ºå®šè´¹ç‡
  # é€šè¿‡åˆçº¦è°ƒç”¨ disableDynamicFee()
  ```

### ä»·æ ¼é¢„è¨€æœº

- ä½¿ç”¨ Chainlink AggregatorV3Interface
- æ”¯æŒ ETH å’Œ ERC20 ä»£å¸ä»·æ ¼æŸ¥è¯¢
- ä»·æ ¼ç²¾åº¦ï¼š8 decimalsï¼ˆä¸ Chainlink ä¸€è‡´ï¼‰
- è‡ªåŠ¨å°†ä»£å¸æ•°é‡è½¬æ¢ä¸º USD ä»·å€¼

### åˆçº¦å‡çº§

- **å‡çº§æ¨¡å¼**ï¼šé€æ˜ä»£ç†ï¼ˆTransparent Proxyï¼‰
- **å‡çº§æµç¨‹**ï¼šV1 â†’ V2ï¼ˆä¿æŒæ•°æ®å®Œæ•´æ€§ï¼‰
- **å­˜å‚¨å®‰å…¨**ï¼šä½¿ç”¨ AuctionStorage åˆ†ç¦»å­˜å‚¨å¸ƒå±€
- **å‘åå…¼å®¹**ï¼šV2 å®Œå…¨å…¼å®¹ V1 çš„æ‰€æœ‰åŠŸèƒ½

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

- [OpenZeppelin](https://openzeppelin.com/) - å®‰å…¨åˆçº¦åº“
- [Chainlink](https://chain.link/) - ä»·æ ¼é¢„è¨€æœºæœåŠ¡
- [Hardhat](https://hardhat.org/) - å¼€å‘æ¡†æ¶

---

**æ³¨æ„**ï¼šæœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ å’Œæ•™è‚²ç›®çš„ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰ï¼Œè¯·è¿›è¡Œå……åˆ†çš„å®‰å…¨å®¡è®¡ã€‚
